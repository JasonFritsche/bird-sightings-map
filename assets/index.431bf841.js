var B=Object.defineProperty,L=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var M=(t,r,s)=>r in t?B(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,m=(t,r)=>{for(var s in r||(r={}))R.call(r,s)&&M(t,s,r[s]);if(x)for(var s of x(r))T.call(r,s)&&M(t,s,r[s]);return t},f=(t,r)=>L(t,E(r));import{R as w,a as j,P as g,j as e,M as W,b as d,c as O,r as b,d as S,u as V,L as P,e as y,f as $,T as z,C as I,B as D,v as H,g as N,h as q,i as K}from"./vendor.dd39d73a.js";const Z=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerpolicy&&(n.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?n.credentials="include":l.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(l){if(l.ep)return;l.ep=!0;const n=s(l);fetch(l.href,n)}};Z();const k=w({key:"allMarkers",default:[]}),_=w({key:"selectedBounds",default:{_northEast:{lat:null,lng:null},_southWest:{lat:null,lng:null}}}),A=j({key:"visibleFilters",get:({get:t})=>t(k).filter(s=>s.isVisible)}),C=({marker:t})=>e(W,{position:[t.lat,t.lng],children:d(O,{children:["A pretty CSS3 popup. ",e("br",{})," ",t.locName]})},t.id);C.propTypes={marker:g.shape({id:g.node,lat:g.number,lng:g.number,locName:g.string})};const F=({isAreaSelection:t})=>{const[r,s]=b.exports.useState(null),[a,l]=S(_),n=V({areaselectstart:()=>{r&&(n.removeLayer(r),s(null))},areaselected:c=>{const u=P.rectangle(c.bounds,{color:"blue",weight:1}).addTo(n),{_bounds:o}=u;l(o),s(u)}});return b.exports.useEffect(()=>{if(!t){n.selectArea.disable();return}n.selectArea.enable(),n.selectArea.setValidate()},[t,n]),null};F.propTypes={isAreaSelection:g.bool};const G=()=>{const[t,r]=b.exports.useState(!1),s=y(k),a=[30.266666,-97.73333],l=c=>{if(c.isSelected)return e(C,{marker:c},c.id)};return d($,{center:a,zoom:13,scrollWheelZoom:!0,children:[e(z,{attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e(I,{position:"topleft",children:e("a",{onClick:()=>r(!t),children:e("div",{"data-tip":(()=>t?"Hold the ctrl button to make a selection":"Click me to make a selection")(),className:"tooltip tooltip-right tooltip-secondary",children:e(D,{size:"30px",style:{color:"#333",backgroundColor:`${t?"#fff":"#bababa"}`}})})})}),e(F,{isAreaSelection:t}),s.map(c=>l(c))]})},J=()=>{const t=()=>a._northEast.lat&&a._southWest.lng?e("button",{className:"btn btn-wide btn-sm",onClick:l,children:"Search"}):e("div",{"data-tip":"Make a selection in the map, then click search",className:"tooltip tooltip-secondary",children:e("button",{disabled:!0,className:"btn btn-wide btn-sm",children:"Search"})}),[r,s]=S(k),a=y(_);console.log(a);const l=()=>{console.log("searching");const n=`https://api.ebird.org/v2/data/obs/geo/recent?lat=${a._northEast.lat}&lng=${a._southWest.lng}&key=nukg96b4vofk`;fetch(n).then(c=>c.json()).then(c=>{const u=c.filter(o=>{if(o.lat<=a._northEast.lat&&o.lng<=a._northEast.lng&&o.lng>=a._southWest.lng&&o.lat>=a._southWest.lat)return o});u.forEach(o=>{o.isSelected=!0,o.isVisible=!0,o.id=H()}),s(u)})};return e("div",{className:"flex justify-center",children:t()})},Q=()=>{const[t,r]=S(k),s=y(A),[a,l]=b.exports.useState(!1),n=o=>{const i=t.map((h,p)=>p===o?f(m({},h),{isSelected:!h.isSelected}):h);r(i)},c=()=>{l(!a);const o=t.map(i=>f(m({},i),{isSelected:a}));r(o)},u=o=>{const i=o.target.value;if(i==null?void 0:i.length){const h=t.map(p=>p.comName.toLowerCase().startsWith(i.toLowerCase())?f(m({},p),{isVisible:!0}):f(m({},p),{isVisible:!1}));r(h)}else{const h=t.map(p=>f(m({},p),{isVisible:!0}));r(h)}};return d(N.Fragment,{children:[e("div",{className:"form-control",children:e("input",{type:"text",placeholder:"Filter",onChange:u,className:"input input-primary input-bordered"})}),e("div",{className:"form-control",children:d("label",{className:"cursor-pointer label",children:[e("span",{className:"label-text",children:"Show/Hide All"}),e("input",{type:"checkbox",checked:!a,onChange:()=>c(),className:"toggle"})]})}),e("div",{className:"h-40 overflow-y-scroll",children:s.map((o,i)=>e("div",{className:"form-control",children:d("label",{className:"cursor-pointer label",children:[e("span",{className:"label-text",children:o.comName}),e("input",{type:"checkbox",checked:t[i].isSelected,className:"checkbox checkbox-primary",onChange:()=>n(i)})]})},o.id))})]})},U=()=>{const t=y(A);return d("div",{className:"drawer drawer-mobile rounded-lg shadow bg-base-200 h-full",children:[e("input",{id:"the-drawer",type:"checkbox",className:"drawer-toggle"}),e("div",{className:"flex flex-col items-center justify-center drawer-content",children:e(G,{})}),d("div",{className:"drawer-side",children:[e("label",{htmlFor:"the-drawer",className:"drawer-overlay"}),d("ul",{className:"menu p-4 overflow-y-auto w-80 bg-base-100 text-base-content",children:[e("li",{children:e("div",{children:e("h1",{className:"font-scada text-2xl text-orange-300 text-center",children:"Bird Sightings"})})}),e("li",{children:e("div",{className:"divider",children:"Search"})}),e("li",{children:e(J,{})}),(()=>{if(t.length)return d(N.Fragment,{children:[e("li",{children:e("div",{className:"divider",children:"Filters"})}),e("li",{children:e(Q,{})})]})})()]})]})]})};function X(){return e("div",{className:"w-full h-screen",children:e(U,{})})}q.render(e(N.StrictMode,{children:e(K,{children:e(X,{})})}),document.getElementById("root"));
